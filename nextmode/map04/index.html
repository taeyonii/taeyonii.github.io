<!DOCTYPE html>
<html>
<head>
  <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script> 
  <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-database.js"></script> 
  <script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyB94yVZjlSbDrqDp7Huqs5fSZ90whBNiNs",
    authDomain: "nextmode-gps.firebaseapp.com",
    databaseURL: "https://nextmode-gps.firebaseio.com",
    projectId: "nextmode-gps",
    storageBucket: "nextmode-gps.appspot.com",
    messagingSenderId: "900293086853"
  };

  firebase.initializeApp(config);

</script>

<style>
  #map {
    height: 480px;
    width: 98%;
  }
</style>

</head>
<body>
  <div id="map"></div>
  <style>
    #map{
      margin:auto;
    }
  </style>
</body>
</html>

<script>


  var database = firebase.database();
  
  var myLat=0.0;
  var myLong=0.0;



  // var latitude = dataRef.child('latitude').on('value',function(snapshot){
  //   myLat = snapshot.val();
  //   console.log(myLat);

  // });
  // var longitude = dataRef.child('longitude').on('value',function(snapshot){
  //   console.log(snapshot.val());
  //   myLong = parseFloat(snapshot.val());
  // });

  // console.log("myLat: " + myLat);
  // console.log("myLong: " + myLong);



  function initMap() {

    // console.log("myLat: " + myLat);
    // console.log("myLong: " + myLong);
    
// console.log("my"+myLocation);

var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 15,
  center: {lat:40.688503, lng:-73.950691}
});


    // var marker_me = new google.maps.Marker({
    //   position: myLocation,
    //   map: map,
    //   animation: google.maps.Animation.DROP,
    // });

    // marker_unionSq.addListener('click', toggleBounce);
    // marker_washingtonSq.addListener('click', toggleBounce);
    var markerTemp;
    
    var myLocation;

    var dataRef = firebase.database().ref().on('value',function(data){

      myLocation=data.val();
      
      // markers[1] = new google.maps.Marker({
      //   position: home,
      //   map: map,
      // });

      console.log("b "+ markerTemp);
      if(markerTemp!=null){
        markerTemp.setMap(null);
        markerTemp=[];
      }
      console.log("a "+ markerTemp);

      var marker = new google.maps.Marker({
        position: myLocation,
        map: map,
      });

      markerTemp=marker;



      // console.log(markers[1]);
      // console.log(markers[2]);

      // markers[1].setMap(map);

      // markers[0]=[];




    });
  }

</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1DJ9_q8lprpP1DvjXfgOoJSsMilU1Wi4&callback=initMap">
</script>
